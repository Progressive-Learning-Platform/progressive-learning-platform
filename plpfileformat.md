# PLP File Format #

The PLP file format `.plp` is a universal file used for all aspects of the design, implementation, and use of software written for the PLP system. The file format encapsulates the original source files (with comments), any generated binaries, meta data, and other intermediate files for a given project.

## Encapsulation ##

The `.plp` file is simply a tarball of the various files included in a PLP project. This allows for simple use with non-PLP software and portability.

## Included Files ##

At a minimum, a PLP project file must include the following:

  * PLP metafile
  * PLP source file(s)

Depending on the state of the project, the project file may also include:

  * Target binary
  * Random files generated by PLPTool extensions
  * A wacky surprise

### Reserved filenames ###

Source files and any other additional files may not have the format `plp.*`. All files named `plp` are reserved. `plp` may exist in the filename however, as in `myplpfile.asm` or `plp_sourcecode.asm`.

### PLP metafile ###

The metafile contains information related to the version of the PLP system the file was built under, source files contained in the rest of the archive, and other information.

The metafile must be named `plp.metafile`.

An example metafile with line descriptions:

```
PLP-4.0
START=0
DIRTY=0
ARCH=0

<source file>
<source file>
.
.
.
<source file>
```

> Line 1:   PLP identifier, with system version

> Line 2:   The first org directive and entrypoint for the program

> Line 3:   Indicates if the binary is up to date with the source. `DIRTY=0` indicates that the binary is compiled against the current source.

> Line 4:   Indicates the architecture ID this project was created for. It defaults to 0 (PLP ISA).

> Line 5:   BLANK

> Line 6-N: Names of source files

### Source files ###

Source files can take any name except for the reserved names (`plp.*`). The metafile keeps a record of all included source files and the order of the list determines which source file will be assembled first, i.e. the first source file in the list is the main program.

### Binary ###

The binary, if compiled, is included as `plp.image`. The binary may not be up to date with the current source, in which case the `DIRTY` flag in the metafile is set.

### Verilog readable binary ###

A file, `plp.hex`, written using the Verilog readable `32'hxxxxxxxx` syntax is included, if compiled. The file contains the compiled binary, with newline separated 32-bit words. This file is used by the `plpromgen` script to generate the ROM image at synthesis time. It is also useful for HDL simulation.

`plp.hex` follows the same convention as the binary with respect to the `DIRTY` flag.