/*
    Copyright 2010 David Fritz, Brian Gordon, Wira Mulia

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

 */

package plp;

import plptool.mods.IORegistry;

/**
 *
 * @author wira
 */
public class PLPIORegistry extends javax.swing.JInternalFrame {

    Object[][] modInfo;

    /** Creates new form PLPIORegistry */
    public PLPIORegistry(plp.PLPToolView mainWindow) {

        IORegistry ioRegistry = mainWindow.getIORegistry();
        modInfo = ioRegistry.getAvailableModulesInformation();

        initComponents();
        cmbModuleSelect.removeAllItems();

        for(int i = 0; i < ioRegistry.getNumOfMods(); i++)
            cmbModuleSelect.addItem(modInfo[i][0]);


    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblModule = new javax.swing.JLabel();
        cmbModuleSelect = new javax.swing.JComboBox();
        txtModuleAddress = new javax.swing.JTextField();
        txtModuleRegfileSize = new javax.swing.JTextField();
        lblAddr = new javax.swing.JLabel();
        lblRegfileSize = new javax.swing.JLabel();
        btnAdd = new javax.swing.JButton();
        txtModInfoScroll = new javax.swing.JScrollPane();
        txtModInfo = new javax.swing.JTextArea();

        setClosable(true);
        setDefaultCloseOperation(javax.swing.WindowConstants.HIDE_ON_CLOSE);
        setIconifiable(true);
        org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(plp.PLPToolApp.class).getContext().getResourceMap(PLPIORegistry.class);
        setTitle(resourceMap.getString("Form.title")); // NOI18N
        setName("Form"); // NOI18N

        lblModule.setText(resourceMap.getString("lblModule.text")); // NOI18N
        lblModule.setName("lblModule"); // NOI18N

        cmbModuleSelect.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        cmbModuleSelect.setName("cmbModuleSelect"); // NOI18N
        cmbModuleSelect.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmbModuleSelectActionPerformed(evt);
            }
        });

        txtModuleAddress.setText(resourceMap.getString("txtModuleAddress.text")); // NOI18N
        txtModuleAddress.setName("txtModuleAddress"); // NOI18N

        txtModuleRegfileSize.setText(resourceMap.getString("txtModuleRegfileSize.text")); // NOI18N
        txtModuleRegfileSize.setName("txtModuleRegfileSize"); // NOI18N

        lblAddr.setText(resourceMap.getString("lblAddr.text")); // NOI18N
        lblAddr.setName("lblAddr"); // NOI18N

        lblRegfileSize.setText(resourceMap.getString("lblRegfileSize.text")); // NOI18N
        lblRegfileSize.setName("lblRegfileSize"); // NOI18N

        btnAdd.setText(resourceMap.getString("btnAdd.text")); // NOI18N
        btnAdd.setName("btnAdd"); // NOI18N
        btnAdd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddActionPerformed(evt);
            }
        });

        txtModInfoScroll.setName("txtModInfoScroll"); // NOI18N

        txtModInfo.setColumns(20);
        txtModInfo.setEditable(false);
        txtModInfo.setLineWrap(true);
        txtModInfo.setRows(5);
        txtModInfo.setWrapStyleWord(true);
        txtModInfo.setName("txtModInfo"); // NOI18N
        txtModInfoScroll.setViewportView(txtModInfo);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(txtModInfoScroll, javax.swing.GroupLayout.DEFAULT_SIZE, 496, Short.MAX_VALUE)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lblModule)
                        .addGap(27, 27, 27)
                        .addComponent(cmbModuleSelect, 0, 367, Short.MAX_VALUE))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblAddr)
                            .addComponent(lblRegfileSize))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtModuleRegfileSize, javax.swing.GroupLayout.DEFAULT_SIZE, 367, Short.MAX_VALUE)
                            .addComponent(txtModuleAddress, javax.swing.GroupLayout.DEFAULT_SIZE, 367, Short.MAX_VALUE)))
                    .addComponent(btnAdd, javax.swing.GroupLayout.Alignment.TRAILING))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(cmbModuleSelect, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblModule))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtModuleAddress, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblAddr))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtModuleRegfileSize, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblRegfileSize))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(txtModInfoScroll, javax.swing.GroupLayout.DEFAULT_SIZE, 215, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btnAdd)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void cmbModuleSelectActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmbModuleSelectActionPerformed
        // TODO add your handling code here:
        if(modInfo != null && cmbModuleSelect.getSelectedIndex() >= 0) {

        if(!(Boolean) modInfo[cmbModuleSelect.getSelectedIndex()][1]) {
            txtModuleRegfileSize.setEnabled(false);
            txtModuleRegfileSize.setText("" + (Integer) modInfo[cmbModuleSelect.getSelectedIndex()][2]);
        } else {
            txtModuleRegfileSize.setEnabled(true);
            txtModuleRegfileSize.setText("");
        }

        txtModInfo.setText((String) modInfo[cmbModuleSelect.getSelectedIndex()][3]);

        }
    }//GEN-LAST:event_cmbModuleSelectActionPerformed

    private void btnAddActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddActionPerformed
        // TODO add your handling code here:
        int modIndex = cmbModuleSelect.getSelectedIndex();
        
    }//GEN-LAST:event_btnAddActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAdd;
    private javax.swing.JComboBox cmbModuleSelect;
    private javax.swing.JLabel lblAddr;
    private javax.swing.JLabel lblModule;
    private javax.swing.JLabel lblRegfileSize;
    private javax.swing.JTextArea txtModInfo;
    private javax.swing.JScrollPane txtModInfoScroll;
    private javax.swing.JTextField txtModuleAddress;
    private javax.swing.JTextField txtModuleRegfileSize;
    // End of variables declaration//GEN-END:variables

}
